<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layouts/layout}">
<head>
<meta charset="UTF-8">
<title>등록</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<style type="text/css">
		.error {
			color : red;
		}
	</style>
</head>
<body>
	<div class="container mx-auto" layout:fragment="content">
		<div class="container-fluid mx-auto p-10">
			<h5 class="m-3 text-center">도서 등록</h5>
			<form id="form1" action="register" method="post">
				<div class="mb-3">
					<label for="bookNo" class="form-label">도서번호</label>
					<input type="text" class="form-control" name="bookNo" th:value="${bookDTO.bookNo}" readonly>
					<div class="error" th:errors="${bookDTO.bookNo}"></div>
				</div>
				
				<div class="mb-3">
					<label for="bookName" class="form-label">도서명</label>
					<input id="bookName" class="form-control" name="bookName" th:value="${bookDTO.bookName}"  placeholder="도서명을 입력하세요."/>
					<div class="error" th:errors="${bookDTO.bookName}"></div>
				</div>
				<div class="mb-3">
					<label for="bookCoverimg" class="form-label">도서표지</label>
					<input type="text" class="form-control" name="bookCoverimg" th:value="${bookDTO.bookCoverimg}"  placeholder="도서표지를 입력하세요.">
					<div class="error" th:errors="${bookDTO.bookCoverimg}"></div>
				</div>
				<div class="mb-3">
					<label for="bookDate" class="form-label">출판일자</label>
					<input type="date" class="form-control" name="bookDate" th:value="${bookDTO.bookDate}" placeholder="출판일자를 입력하세요">
					<div class="error" th:errors="${bookDTO.bookDate}"></div>
				</div>
				<div class="mb-3">
					<label for="bookPrice" class="form-label">금액</label>
					<input type="number" class="form-control" name="bookPrice" th:value="${bookDTO.bookPrice}" placeholder="금액을 입력하세요">
					<div class="error" th:errors="${bookDTO.bookPrice}"></div>
				</div>
				<div class="mb-3">
					<label for="bookPublisher" class="form-label">출판사</label>
					<input type="text" class="form-control" name="bookPublisher" th:value="${bookDTO.bookPublisher}" placeholder="출판사를 입력하세요">
					<div class="error" th:errors="${bookDTO.bookPublisher}"></div>
				</div>
				<div class="mb-3">
					<label for="bookInfo" class="form-label">도서소개</label>
					<textarea type="text" rows="5"  class="form-control" name="bookInfo" th:text="${bookDTO.bookInfo}" placeholder="제목을 입력하세요."></textarea>
					<div class="error" th:errors="${bookDTO.bookInfo}"></div>
				</div>
				<div class="mx-auto text-center">
					<button type="button" class="btn btn-primary" id="btnInsert">등록</button> 
					<button type="button" class="btn btn-success" onclick="location.href='list'" id="btnUpdate">조회</button>
				</div>
			</form>
		</div>
		<script th:inline="javascript">
			document.querySelector("#btnInsert").addEventListener("click", () => {
				
				let bookName = document.querySelector("#bookName");
				console.log(bookName)
				if(bookName.value == undefined || bookName.value == '') {
					alert("도서명이 입력되지 않았습니다.");
					bookName.focus();
					return;
				}
				
				const form = document.querySelector("#form1");
				form.action = "register";
				form.method = "POST";
				alert("도서등록이 완료 되었습니다.")
				form.submit();
				
			})
		</script>
	</div>
	
	
</body>
</html>